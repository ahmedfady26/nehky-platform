# ๐๏ธ ุฎุทุฉ ุชุทููุฑ ูุธุงู "ุงูุตุฏูู ุงูุฃูุถู" ุงููุงูู - ูุฑุงุญู ุงูุชูููุฐ

**๐ ุชุงุฑูุฎ ุงูุชุฎุทูุท:** 30 ููููู 2025  
**๐ฏ ุงููุฏู:** ุชุทููุฑ ูุธุงู "ุงูุตุฏูู ุงูุฃูุถู" ุงูุชุจุงุฏูู ุจุขููุฉ ุงูุชุฑุดูุญ ูุงูููุงููุงุช

---

## ๐ ุฎุฑูุทุฉ ุงููุฑุงุญู

### ๐ต **ุงููุฑุญูุฉ 1: ุงูุจููุฉ ุงูุชุญุชูุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช** *(ุงูููู 1)*
- [ ] ุฅูุดุงุก ุฌุฏูู `BestFriendRelation` ุงูุฌุฏูุฏ
- [ ] ุฅุถุงูุฉ Enums ุงููุงุฒูุฉ ููุญุงูุงุช ูุงูุฃููุงุน
- [ ] ุฅูุดุงุก ุงูููุงุฑุณ ูุงููููุฏ ุงููุทููุจุฉ
- [ ] ุชุญุฏูุซ ุงูุนูุงูุงุช ูู ุฌุฏูู `User`
- [ ] ุฅุฌุฑุงุก Migration ูุชุฌุฑุจุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช

**โฑ๏ธ ุงูููุช ุงูููุฏุฑ:** 2-3 ุณุงุนุงุช  
**๐ ูุณุจุฉ ุงูุฅูุฌุงุฒ ุจุนุฏ ูุฐู ุงููุฑุญูุฉ:** 25%

---

### ๐ก **ุงููุฑุญูุฉ 2: ุงููุธุงู ุงูุฃุณุงุณู ููููุงุท ุงูุชุจุงุฏููุฉ** *(ุงูููู 2)*
- [ ] ุชุทููุฑ ุฏูุงู ุญุณุงุจ ุงูููุงุท ุงูุชุจุงุฏููุฉ ุจูู ุงูุทุฑููู
- [ ] ุฅูุดุงุก ุขููุฉ ุฌูุน ููุงุท ุงูุชูุงุนู ุงููุดุชุฑู
- [ ] ุชุทููุฑ ุฎูุงุฑุฒููุฉ ุชุญุฏูุฏ ุฃูุถู ุงูุฃุตุฏูุงุก ุงููุฑุดุญูู
- [ ] ุฅูุดุงุก ุฏูุงู ุงููุณุงุนุฏุฉ ูุงูุชุญูู ูู ุงูุดุฑูุท
- [ ] ุงุฎุชุจุงุฑ ุงููุธุงู ุงูุฃุณุงุณู

**โฑ๏ธ ุงูููุช ุงูููุฏุฑ:** 4-5 ุณุงุนุงุช  
**๐ ูุณุจุฉ ุงูุฅูุฌุงุฒ ุจุนุฏ ูุฐู ุงููุฑุญูุฉ:** 50%

---

### ๐ **ุงููุฑุญูุฉ 3: ูุธุงู ุงูุชุฑุดูุญ ุงูุฏูุฑู** *(ุงูููู 3)*
- [ ] ุชุทููุฑ ูุธุงู ุงูุชุฑุดูุญ ูู ุฃุณุจูุนูู
- [ ] ุฅูุดุงุก ุขููุฉ ุงุชุฎุงุฐ ุงููุฑุงุฑ (ุชููุงุฆู/ูุฏูู)
- [ ] ุชุทุจูู ุญุฏูุฏ ุงูุชุฑุดูุญ (ูุงุญุฏ ููููุงูุ 24 ุณุงุนุฉ ุจูู ุงูุชุฑุดูุญุงุช)
- [ ] ุฅูุดุงุก ูุธุงู ุฅุดุนุงุฑุงุช ุงูุชุฑุดูุญ
- [ ] ุชุทููุฑ ูุงุฌูุงุช ุงูููุงููุฉ ูุงูุฑูุถ

**โฑ๏ธ ุงูููุช ุงูููุฏุฑ:** 3-4 ุณุงุนุงุช  
**๐ ูุณุจุฉ ุงูุฅูุฌุงุฒ ุจุนุฏ ูุฐู ุงููุฑุญูุฉ:** 75%

---

### ๐ข **ุงููุฑุญูุฉ 4: ุงููููุฒุงุช ูุงูุตูุงุญูุงุช ุงููููุฏุฉ** *(ุงูููู 4)*
- [ ] ุชุทุจูู ุดุงุฑุฉ "๐ ุงูุตุฏูู ุงูุฃูุถู"
- [ ] ูุธุงู ุงููุดุฑ ุงููุญุฏูุฏ (ููุดูุฑ ูุงุญุฏ ุจููุงููุฉ)
- [ ] ูุธุงู ุงูุชุนูููุงุช ุงููุญุฏูุฏ (10 ุชุนูููุงุช)
- [ ] ุขููุฉ ุทูุจ ุงูููุงููุงุช ููุฃูุดุทุฉ
- [ ] ูุธุงู ุงูุชูุงุก ุงูุตูุงุญูุฉ ุงูุชููุงุฆู (ุฃุณุจูุนูู)

**โฑ๏ธ ุงูููุช ุงูููุฏุฑ:** 4-5 ุณุงุนุงุช  
**๐ ูุณุจุฉ ุงูุฅูุฌุงุฒ ุจุนุฏ ูุฐู ุงููุฑุญูุฉ:** 90%

---

### ๐ด **ุงููุฑุญูุฉ 5: ุงูุงุฎุชุจุงุฑ ุงูููุงุฆู ูุงูุชูุซูู** *(ุงูููู 5)*
- [ ] ุงุฎุชุจุงุฑ ุดุงูู ูุฌููุน ุงููุธุงุฆู
- [ ] ุงุฎุชุจุงุฑ ุงูุณููุงุฑูููุงุช ุงููุฎุชููุฉ
- [ ] ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุงูุญุงูุงุช ุงูุงุณุชุซูุงุฆูุฉ
- [ ] ูุชุงุจุฉ ุงูุชูุซูู ุงูููุงุฆู ูุงูุฃูุซูุฉ
- [ ] ุฅูุดุงุก ุฏููู ุงููุทูุฑ ูุงููุณุชุฎุฏู

**โฑ๏ธ ุงูููุช ุงูููุฏุฑ:** 2-3 ุณุงุนุงุช  
**๐ ูุณุจุฉ ุงูุฅูุฌุงุฒ ุจุนุฏ ูุฐู ุงููุฑุญูุฉ:** 100%

---

## ๐ฏ **ุชูุงุตูู ูู ูุฑุญูุฉ**

### ๐ต **ุงููุฑุญูุฉ 1: ุงูุจููุฉ ุงูุชุญุชูุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช**

#### ๐ **ุงููุชุทูุจุงุช ุงูุชูููุฉ:**
```prisma
// 1. ุฌุฏูู ุงูุนูุงูุงุช ุงูุซูุงุฆูุฉ
model BestFriendRelation {
  id String @id @default(uuid())
  
  // ุงูุทุฑูุงู ูู ุงูุนูุงูุฉ
  user1Id String @map("user_1_id")
  user2Id String @map("user_2_id")
  
  // ุงูููุงุท ูุงูุฅุญุตุงุฆูุงุช
  totalPoints      Float @default(0) @map("total_points")
  user1Points     Float @default(0) @map("user_1_points")
  user2Points     Float @default(0) @map("user_2_points")
  
  // ุชูุงุฑูุฎ ุงูุนูุงูุฉ
  startDate       DateTime @map("start_date")
  endDate         DateTime @map("end_date")
  nominatedAt     DateTime @default(now()) @map("nominated_at")
  
  // ุญุงูุฉ ุงูุนูุงูุฉ
  status          BestFriendStatus @default(PENDING)
  
  // ุฅุนุฏุงุฏุงุช ุงูุตูุงุญูุงุช
  postsUsed       Int @default(0) @map("posts_used")
  commentsUsed    Int @default(0) @map("comments_used")
  approvalsRequired Boolean @default(true) @map("approvals_required")
  
  // ูุนูููุงุช ุงููุธุงู
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
}

// 2. ุงูุญุงูุงุช ุงููุฎุชููุฉ
enum BestFriendStatus {
  PENDING        // ูู ุงูุชุธุงุฑ ุงูููุงููุฉ
  ACTIVE         // ูุดุท
  EXPIRED        // ููุชูู ุงูุตูุงุญูุฉ
  REJECTED       // ูุฑููุถ
  CANCELLED      // ููุบู
}

// 3. ุฃููุงุน ุงูุทูุจุงุช
enum BestFriendPermissionType {
  POST_ON_PROFILE    // ูุดุฑ ุนูู ุงูุตูุญุฉ
  COMMENT_SPECIAL    // ุชุนููู ุฎุงุต
}
```

#### ๐ **ุงููููุงุช ุงููุชุฃุซุฑุฉ:**
- `prisma/schema.prisma` - ุฅุถุงูุฉ ุงูุฌุฏุงูู ูุงูุนูุงูุงุช
- `prisma/migrations/` - ููู Migration ุฌุฏูุฏ

#### โ **ูุฎุฑุฌุงุช ุงููุฑุญูุฉ 1:**
- ุฌุฏูู `best_friend_relations` ุฌุงูุฒ ููุงุจู ููุงุณุชุฎุฏุงู
- Enums ูุญุฏุฏุฉ ููุญุงูุงุช ูุงูุฃููุงุน
- ุนูุงูุงุช ุตุญูุญุฉ ูุน ุฌุฏูู `users`
- ููุงุฑุณ ููุฃุฏุงุก ุงููุญุณู

---

### ๐ก **ุงููุฑุญูุฉ 2: ุงููุธุงู ุงูุฃุณุงุณู ููููุงุท ุงูุชุจุงุฏููุฉ**

#### ๐ **ุงููุธุงุฆู ุงููุทููุจุฉ:**
```typescript
// 1. ุญุณุงุจ ุงูููุงุท ุงูุชุจุงุฏููุฉ
async function calculateMutualScore(user1Id: string, user2Id: string)

// 2. ุงูุนุซูุฑ ุนูู ุงููุฑุดุญูู
async function findBestFriendCandidates(userId: string)

// 3. ุชุญููู ุงูุนูุงูุฉ
async function analyzeRelationshipStrength(user1Id: string, user2Id: string)

// 4. ุงูุชุญูู ูู ุงูุดุฑูุท
async function checkEligibilityForBestFriend(user1Id: string, user2Id: string)
```

#### ๐ **ุงููููุงุช ุงููุทููุจุฉ:**
- `src/lib/best-friend-system.ts` - ุงููุธุงู ุงูุฃุณุงุณู ุงูุฌุฏูุฏ
- `src/lib/mutual-scoring.ts` - ูุธุงู ุงูููุงุท ุงูุชุจุงุฏููุฉ

#### โ **ูุฎุฑุฌุงุช ุงููุฑุญูุฉ 2:**
- ุฎูุงุฑุฒููุฉ ุญุณุงุจ ุงูููุงุท ุงูุชุจุงุฏููุฉ
- ุชุญุฏูุฏ ุงููุฑุดุญูู ุจุฏูุฉ
- ุชุญููู ููุฉ ุงูุนูุงูุฉ ุจูู ุงูุทุฑููู

---

### ๐ **ุงููุฑุญูุฉ 3: ูุธุงู ุงูุชุฑุดูุญ ุงูุฏูุฑู**

#### ๐ **ุงููุธุงุฆู ุงููุทููุจุฉ:**
```typescript
// 1. ุงูุชุฑุดูุญ ุงูุฏูุฑู
async function runBiWeeklyNomination()

// 2. ุงุชุฎุงุฐ ุงููุฑุงุฑ
async function decideNominationMethod(candidates: Candidate[])

// 3. ุฅุฏุงุฑุฉ ุงูุญุฏูุฏ
async function checkNominationLimits(userId: string)

// 4. ุงูุฅุดุนุงุฑุงุช
async function sendNominationNotification(relationId: string)
```

#### ๐ **ุงููููุงุช ุงููุทููุจุฉ:**
- `src/lib/nomination-scheduler.ts` - ุงููุฌุฏููุฉ ุงูุฏูุฑูุฉ
- `src/lib/decision-engine.ts` - ูุญุฑู ุงุชุฎุงุฐ ุงููุฑุงุฑ

#### โ **ูุฎุฑุฌุงุช ุงููุฑุญูุฉ 3:**
- ุชุฑุดูุญ ุชููุงุฆู ูู ุฃุณุจูุนูู
- ูุฑุงุฑุงุช ุฐููุฉ ุญุณุจ ุงูุชููู ุฃู ุงูุชุณุงูู
- ุงุญุชุฑุงู ุญุฏูุฏ ุงูุชุฑุดูุญ

---

### ๐ข **ุงููุฑุญูุฉ 4: ุงููููุฒุงุช ูุงูุตูุงุญูุงุช ุงููููุฏุฉ**

#### ๐ **ุงููุธุงุฆู ุงููุทููุจุฉ:**
```typescript
// 1. ุฅุฏุงุฑุฉ ุงูุดุงุฑุงุช
async function assignBestFriendBadge(relationId: string)

// 2. ุตูุงุญูุงุช ุงููุดุฑ
async function requestPostPermission(relationId: string, content: string)

// 3. ุตูุงุญูุงุช ุงูุชุนููู
async function checkCommentLimit(relationId: string)

// 4. ุงูุชูุงุก ุงูุตูุงุญูุฉ
async function scheduleRelationExpiry(relationId: string)
```

#### ๐ **ุงููููุงุช ุงููุทููุจุฉ:**
- `src/lib/best-friend-permissions.ts` - ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช
- `src/lib/expiry-scheduler.ts` - ูุธุงู ุงูุชูุงุก ุงูุตูุงุญูุฉ

#### โ **ูุฎุฑุฌุงุช ุงููุฑุญูุฉ 4:**
- ุดุงุฑุงุช ููููุงุช ุจุตุฑูุฉ
- ุตูุงุญูุงุช ูุญุฏูุฏุฉ ููุฑุงูุจุฉ
- ุงูุชูุงุก ุชููุงุฆู ููุนูุงูุงุช

---

## ๐ฎ **ูู ุชุฑูุฏ ุงูุจุฏุก ุจุงููุฑุญูุฉ ุงูุฃูููุ**

**ุงููุฑุญูุฉ 1** ุชุชุถูู:
1. โ ุฅุถุงูุฉ ุฌุฏูู `BestFriendRelation` 
2. โ ุฅุถุงูุฉ Enums ููุญุงูุงุช
3. โ ุชุญุฏูุซ ุงูุนูุงูุงุช ูู ุฌุฏูู `User`
4. โ ุฅูุดุงุก Migration ูุชุฌุฑุจุชูุง

**โฑ๏ธ ููุช ูุชููุน:** 2-3 ุณุงุนุงุช  
**๐ง ุชุนููุฏ:** ููุฎูุถ ุฅูู ูุชูุณุท

---

**๐ฌ ุฃุฎุจุฑูู ุนูุฏูุง ุชููู ุฌุงูุฒุงู ูุจุฏุก ุงููุฑุญูุฉ ุงูุฃูููุ ุฃู ุชุฑูุฏ ุชุนุฏูู ุฃู ุดูุก ูู ุงูุฎุทุฉุ**
